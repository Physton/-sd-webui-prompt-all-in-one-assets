# :star: Настройка API перевода

> В англоязычной среде эту кнопку будут скрывать.

## Открытие окна настройки API перевода

1. Наведите курсор мыши на `иконку кнопки настроек`.

    ![](../assets/images/TranslationApiConfiguration/api_btn.png)

2. Нажмите на `иконку настройки API перевода`.

    ![](../assets/images/TranslationApiConfiguration/api.png)

## Описание интерфейса перевода

1. Это расширение интегрирует множество интерфейсов перевода. Вы можете выбрать подходящий интерфейс перевода в соответствии со своими потребностями.

    ![](../assets/images/demo.translate_setting.gif)

2. В настоящее время разделено на три категории: `Не требуется ключ API`, `Требуется ключ API` и `Офлайн-перевод`.

    ![](../assets/images/TranslationApiConfiguration/api_list.png)

3. Для интерфейсов, требующих API KEY, после выбора будет предоставлена инструкция по запросу в соответствии с инструкциями. 

4. Для интерфейсов, не требующих API KEY, если перевод не удался, попробуйте переключиться на другой интерфейс, не отправляйте запрос.

5. Выбирайте подходящий интерфейс перевода в соответствии со скоростью и качеством перевода каждого интерфейса.

## Сравнение интерфейсов перевода

|  | Не требует API KEY | Требует API KEY |
| :--- | :--- | :--- |
| Оплата | `Бесплатно` | `Большинство бесплатно`<br/>возможно, есть ограничение на количество символов перевода в месяц, но в основном бесплатный лимит полностью достаточен для наших потребностей. |
| Стабильность | `Очень нестабильный`<br/>В зависимости от среды компьютера и сетевой среды каждого человека часть из них может быть недоступна.<br/>Очень нестабильно и может в любой момент перестать работать.<br/>Во время тестирования перевод может быть успешным, но в реальной работе перевод может не работать. | `Очень стабильный`<br/>Почти никогда не выходит из строя.<br/>Перевод почти никогда не терпит неудачи. |
| Скорость | `Очень медленный` | `Очень быстрый` |

### Офлайн-перевод

1. Во время инициализации требуются более высокие требования к сетевой среде.
2. Требуются более высокие требования к производительности компьютера.
3. Могут быть значительные различия в качестве перевода между разными моделями.
4. Могут быть значительные различия в скорости перевода между разными моделями.

## TБесплатная квота для интерфейса перевода

| Интерфейс перевода | Бесплатный лимит |
| :---: | :---: |
| Интерфейс без API KEY | Безлимитный |
| Google | Бесплатно до 500 000 символов в месяц |
| OpenAI / ChatGPT | Первоначально предоставляется 5 долларов США на опытный счет |
| Microsoft | Бесплатно до 2 миллионов символов в месяц (только для первых 12 месяцев после регистрации в Azure) |
| Amazon | Бесплатно до 2 миллионов символов в месяц (только для первых 12 месяцев после регистрации в AWS) |
| DeepL | Бесплатная версия до 500 000 символов в месяц |
| Yandex | Неизвестно |
| MyMemory | Бесплатный лимит 50 000 символов в день |
| Baidu / 百度翻译 | Бесплатно до 50 000 символов в месяц |
| Alibaba / 阿里翻译 | Бесплатно до 1 миллиона символов в месяц |
| Youdao / 有道翻译 | Новым пользователям предоставляется опытный счет на 50 юаней |
| Tencent / 腾讯翻译 | Бесплатно до 5 миллионов символов в месяц |
| Niutrans / 小牛翻译 | Необходимо войти в систему для получения |
| Caiyun / 彩云小译 | Бесплатно до 1 миллиона символов в месяц |
| VolcEngine / 火山翻译 | Бесплатно до 2 миллионов символов в месяц |

## Тестирование интерфейса

![](../assets/images/TranslationApiConfiguration/test.png)

1. Выберите интерфейс и нажмите кнопку "Тест".

2. Если перевод успешен, результат перевода будет отображаться.

3. Если перевод не удался, будет показано сообщение об ошибке.

## Улучшенный перевод TagComplate

> Включить CSV-файл в [a1111-sd-webui-tagcomplete](https://github.com/DominikDoom/a1111-sd-webui-tagcomplete) для улучшения функции перевода.
>
> После включения этой функции количество запросов в сеть уменьшится, результат перевода станет более точным.
>
> Эта функция заключается в том, что для каждого слова автоматически ищется результат перевода в CSV-файле. Если результат найден, то результат перевода из сети запрашиваться не будет. Если результат не найден, будет запрошен результат перевода из сети.
>
> Поэтому, если в вашем CSV-файле нет слов, которые вы хотите перевести, эта функция не будет работать.

1. Эта функция не требует установки расширения [a1111-sd-webui-tagcomplete](https://github.com/DominikDoom/a1111-sd-webui-tagcomplete). Вы можете просто поместить переведенный CSV-файл в каталог `extensions\sd-webui-prompt-all-in-one\tags`. Если этого каталога нет, создайте его самостоятельно.

    ![](../assets/images/TranslationApiConfiguration/tags_dir.png)

2. Выберите правильный CSV-файл, иначе некоторые слова могут переводится неверно, результат перевода может быть равен 0, язык перевода может быть неверным и т.д.

3. Вы можете открыть CSV-файл в Excel, чтобы проверить, правильный ли формат содержимого. Правильный формат выглядит следующим образом:

    | Номер | Английский | Ваш язык (например, китайский) |
    | :---: | :---: | :---: |
    | 1 | 1girl | 1女孩 |
    | 2 | 1boy | 1男孩 |
    | ... | ... | ... |

    ![](../assets/images/TranslationApiConfiguration/csv.png)

4. Нажмите кнопку "Обновить" и выберите правильный CSV-файл.

    ![](../assets/images/TranslationApiConfiguration/select_csv.png)

5. Нажмите кнопку "Тест". Проверьте, правильный ли результат перевода. В результате тестирования на каждой строке будет отображаться английское слово, а справа - результат перевода на ваш язык. Если результат перевода справа неверный, проверьте, правильный ли ваш CSV-файл, иначе не включайте эту функцию.

    ![](../assets/images/TranslationApiConfiguration/csv_test.png)

6. Если вы хотите использовать только CSV для перевода при автоматическом переводе, а не использовать интерфейс перевода в сети, установите следующий флажок. Если вы нажмете кнопку перевода вручную, интерфейс перевода в сети будет использоваться.

    ![](../assets/images/TranslationApiConfiguration/csv_only.png)